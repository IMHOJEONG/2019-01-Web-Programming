# Resource Owner

>> OAuth의 첫 번째 절차 : Resource Owner가 Resource Server에게 Client의 접근 승인한다는 것을 알려주어야 함.

>> 우선 우리가 등록을 하게 되면 리소스 서버와 클라이언트는 양쪽 다 클라이언트 id와 클라이언트 씨크릿, 리다이렉트 url이라는 세 가지 핵심적인 정보를 
>> 리소스 서버가 알게되고 클라이언트도 그 정보를 알 수 있게 됨.
>> 클라이언트는 리다이렉트 url에 해당되는 페이지를 구현해 놓고 준비를 해 놓고 있어야 합니다. 

>> 리소스 서버가 갖고 있는 기능이 예를 들어서 4개다 & 각각의 기능에 이름이 abcd라고 했을 때 
>> 클라이언트가 리소스 서버의 모든 기능이 필요한 것이 아닌 b,c에 해당되는 2개의 기능 많이 필요하다면 모든 기능에 대해 인증을 받는 것이 아니라
>> 최소한의 기능에 대해서만 인증을 받는 게 서로에게 좋음

>> 리소스 오너 : 우리의 그 애플리케이션의 접속을 할 것
>> 근데 접속을 하는 과정에서 우리가 리소스 서버를 사용해야 되는 상황이라면?
>> ex) 페이스북에 글 게시, 구글 캘린더에 날짜 기록
이러한 작업을 해야 한다면? 
>> 우리는 리소스 오너에게 Login with facebook 같은 화면을 보여주게 됨.
>> 아니면 '귀하가 하시려는 일은 페이스북의 어떤 기능이 필요해서 인증을 거쳐야 합니다.' 메시지를 보여줄 것 

>> 사용자가 동의를 해야 다음으로 넘어갈 듯 

>> https://resource.server/?client_id=1&scope=B,C&redirect_uri=https://client/callback

>> 이러한 링크를 만들어 주어야 한다. 
>> 우리의 클라이언트 id, 우리가 사용하고자 하는 기능(scope) 
>> 리다이렉트 url의 값을 주소로 링크로 제공을 해주면 됨.

>> urldecode.org - 우리가 보기 좋게 바꾸어줌

>> 우리 리소스 오너가 리소스 서버로 접속을 위의 주소로 하게 되면,
>> 리소스 서버가 리소스 오너가 현재 로그인이 되어 있는지 되어 있지 않은지를 봐서 
>> 로그인이 안 되어 있으면 로그인을 하라는 화면을 보여줌

>> 로그인에 성공했다면?
>> 리소스 서버는 그제서야 클라이언트 id값과 같은 클라이언트 id값이 있는지를 확인

>> 그리고 자신이 갖고 있는 클라이언트 id 의 리다이렉트 url을 접속을 시도하고자 하는 그 요청의 리다이렉트 url 값과 같은지 비교 
>> 다르면 여기서 작업을 끝내고 
>> 같다면 리소스 오너에게 이 scope 해당되는 권한을
클라이언트에게 부여할 것인지를 확인하는 메시지를 
전송하게 됨.
>> (어떤 클라이언트가 요청하고 있다고 물어봄)

>> 허용했다면 => 정보 관리 소스 서버로 전송이 됨.
>> 그럼 리소스 서버는 ex) d유저 1번은 scope b와 c에 대한 작업을 허용하는 것
>> 저것을 서버에 저장 (데이터베이스일 수도, 파일일 수도)
